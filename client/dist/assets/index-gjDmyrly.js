const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-COGynuD-.js","assets/ui-BndUj6rU.js","assets/vendor-C_rG9DFw.js","assets/firebase-BaLQ-sp5.js","assets/TopBar-UEOhfdgU.js","assets/BoostModal-C1gW14Y4.js","assets/PaymentModal-DBoEzFiD.js","assets/Messages-ByDMKnkV.js","assets/Profile-CIlUIG4z.js","assets/VerificationModal-CmfMMQwG.js","assets/Circles-OMdst48w.js","assets/CircleDetails-R7Ttvr2m.js","assets/Marketplace-W8Nchz1O.js","assets/ProductDetails-CaW4D_53.js","assets/BusinessHub-DCscST2u.js","assets/BusinessPage-spzIp3k7.js","assets/SavedItems-CM1ZSNIZ.js","assets/Watch-Ms7kgI2Y.js","assets/Dating-BTFylqtN.js","assets/Notifications-DMDfVXbJ.js","assets/Connections-D2iFPGCo.js","assets/Explore-DpMc79II.js","assets/PostDetails--p1r5hdj.js","assets/BkashCallback-DwhmY1AI.js","assets/AdminDashboard-D3OkQRdP.js","assets/BoostHub-BGywxina.js"])))=>i.map(i=>d[i]);
import{j as e,V as ue,a as De,b as Re,M as Le,c as Pe,d as Oe,P as Me,e as Be}from"./ui-BndUj6rU.js";import{a as Ve,u as ne,b as ve,r as i,B as Fe,R as Ue,c as S,N as ze,d as we}from"./vendor-C_rG9DFw.js";import{_ as $e,r as me,g as We,a as qe,i as Ge,b as He,c as Je,p as Ke,d as Ye,s as Xe,e as Qe,f as Ze,o as K,h as z,j as V,q as Q,w as J,k as $,l as oe,m as je,n as Ne,u as F,t as te,v as G,x as et,y as tt,z as rt,A as Ee,B as st,C as at}from"./firebase-BaLQ-sp5.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=a(s);fetch(s.href,o)}})();var re={},fe=Ve;re.createRoot=fe.createRoot,re.hydrateRoot=fe.hydrateRoot;const nt="modulepreload",ot=function(t){return"/"+t},he={},k=function(r,a,n){let s=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(a.map(u=>{if(u=ot(u),u in he)return;he[u]=!0;const p=u.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":nt,p||(x.as="script"),x.crossOrigin="",x.href=u,c&&x.setAttribute("nonce",c),document.head.appendChild(x),p)return new Promise((h,f)=>{x.addEventListener("load",h),x.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return r().catch(o)})};var pe={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const it=function(t){const r=[];let a=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?r[a++]=s:s<2048?(r[a++]=s>>6|192,r[a++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),r[a++]=s>>18|240,r[a++]=s>>12&63|128,r[a++]=s>>6&63|128,r[a++]=s&63|128):(r[a++]=s>>12|224,r[a++]=s>>6&63|128,r[a++]=s&63|128)}return r},lt=function(t){const r=[];let a=0,n=0;for(;a<t.length;){const s=t[a++];if(s<128)r[n++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[a++];r[n++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[a++],l=t[a++],c=t[a++],u=((s&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;r[n++]=String.fromCharCode(55296+(u>>10)),r[n++]=String.fromCharCode(56320+(u&1023))}else{const o=t[a++],l=t[a++];r[n++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return r.join("")},ct={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,r){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=r?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,c=l?t[s+1]:0,u=s+2<t.length,p=u?t[s+2]:0,m=o>>2,x=(o&3)<<4|c>>4;let h=(c&15)<<2|p>>6,f=p&63;u||(f=64,l||(h=64)),n.push(a[m],a[x],a[h],a[f])}return n.join("")},encodeString(t,r){return this.HAS_NATIVE_SUPPORT&&!r?btoa(t):this.encodeByteArray(it(t),r)},decodeString(t,r){return this.HAS_NATIVE_SUPPORT&&!r?atob(t):lt(this.decodeStringToByteArray(t,r))},decodeStringToByteArray(t,r){this.init_();const a=r?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const o=a[t.charAt(s++)],c=s<t.length?a[t.charAt(s)]:0;++s;const p=s<t.length?a[t.charAt(s)]:64;++s;const x=s<t.length?a[t.charAt(s)]:64;if(++s,o==null||c==null||p==null||x==null)throw new dt;const h=o<<2|c>>4;if(n.push(h),p!==64){const f=c<<4&240|p>>2;if(n.push(f),x!==64){const g=p<<6&192|x;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class dt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ut=function(t){try{return ct.decodeString(t,!0)}catch(r){console.error("base64Decode failed: ",r)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft=()=>mt().__FIREBASE_DEFAULTS__,ht=()=>{if(typeof process>"u"||typeof pe>"u")return;const t=pe.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pt=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const r=t&&ut(t[1]);return r&&JSON.parse(r)},xt=()=>{try{return ft()||ht()||pt()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gt=t=>{var r,a;return(a=(r=xt())===null||r===void 0?void 0:r.emulatorHosts)===null||a===void 0?void 0:a[t]},bt=t=>{const r=gt(t);if(!r)return;const a=r.lastIndexOf(":");if(a<=0||a+1===r.length)throw new Error(`Invalid host ${r} with no separate hostname and port!`);const n=parseInt(r.substring(a+1),10);return r[0]==="["?[r.substring(1,a-1),n]:[r.substring(0,a),n]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt="FirebaseError";class Z extends Error{constructor(r,a,n){super(a),this.code=r,this.customData=n,this.name=yt,Object.setPrototypeOf(this,Z.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vt.prototype.create)}}class vt{constructor(r,a,n){this.service=r,this.serviceName=a,this.errors=n}create(r,...a){const n=a[0]||{},s=`${this.service}/${r}`,o=this.errors[r],l=o?wt(o,n):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new Z(s,c,n)}}function wt(t,r){return t.replace(jt,(a,n)=>{const s=r[n];return s!=null?String(s):`<${n}?>`})}const jt=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t){return t&&t._delegate?t._delegate:t}class Nt{constructor(r,a,n){this.name=r,this.instanceFactory=a,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(r){return this.instantiationMode=r,this}setMultipleInstances(r){return this.multipleInstances=r,this}setServiceProps(r){return this.serviceProps=r,this}setInstanceCreatedCallback(r){return this.onInstanceCreated=r,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et="type.googleapis.com/google.protobuf.Int64Value",Ct="type.googleapis.com/google.protobuf.UInt64Value";function Ce(t,r){const a={};for(const n in t)t.hasOwnProperty(n)&&(a[n]=r(t[n]));return a}function se(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(r=>se(r));if(typeof t=="function"||typeof t=="object")return Ce(t,r=>se(r));throw new Error("Data cannot be encoded in JSON: "+t)}function X(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case Et:case Ct:{const r=Number(t.value);if(isNaN(r))throw new Error("Data cannot be decoded from JSON: "+t);return r}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(r=>X(r)):typeof t=="function"||typeof t=="object"?Ce(t,r=>X(r)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends Z{constructor(r,a,n){super(`${le}/${r}`,a||""),this.details=n}}function _t(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function St(t,r){let a=_t(t),n=a,s;try{const o=r&&r.error;if(o){const l=o.status;if(typeof l=="string"){if(!xe[l])return new H("internal","internal");a=xe[l],n=l}const c=o.message;typeof c=="string"&&(n=c),s=o.details,s!==void 0&&(s=X(s))}}catch{}return a==="ok"?null:new H(a,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(r,a,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=r.getImmediate({optional:!0}),this.messaging=a.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||a.get().then(s=>this.messaging=s,()=>{}),this.appCheck||n.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const r=await this.auth.getToken();return r==null?void 0:r.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(r){if(this.appCheck){const a=r?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return a.error?null:a.token}return null}async getContext(r){const a=await this.getAuthToken(),n=await this.getMessagingToken(),s=await this.getAppCheckToken(r);return{authToken:a,messagingToken:n,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae="us-central1";function At(t){let r=null;return{promise:new Promise((a,n)=>{r=setTimeout(()=>{n(new H("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{r&&clearTimeout(r)}}}class Tt{constructor(r,a,n,s,o=ae,l){this.app=r,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new kt(a,n,s),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(o);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=ae}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(r){const a=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${a}/${this.region}/${r}`:this.customDomain!==null?`${this.customDomain}/${r}`:`https://${this.region}-${a}.cloudfunctions.net/${r}`}}function It(t,r,a){t.emulatorOrigin=`http://${r}:${a}`}function Dt(t,r,a){return n=>Lt(t,r,n,{})}async function Rt(t,r,a,n){a["Content-Type"]="application/json";let s;try{s=await n(t,{method:"POST",body:JSON.stringify(r),headers:a})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}function Lt(t,r,a,n){const s=t._url(r);return Pt(t,s,a,n)}async function Pt(t,r,a,n){a=se(a);const s={data:a},o={},l=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);l.authToken&&(o.Authorization="Bearer "+l.authToken),l.messagingToken&&(o["Firebase-Instance-ID-Token"]=l.messagingToken),l.appCheckToken!==null&&(o["X-Firebase-AppCheck"]=l.appCheckToken);const c=n.timeout||7e4,u=At(c),p=await Promise.race([Rt(r,s,o,t.fetchImpl),u.promise,t.cancelAllRequests]);if(u.cancel(),!p)throw new H("cancelled","Firebase Functions instance was deleted.");const m=St(p.status,p.json);if(m)throw m;if(!p.json)throw new H("internal","Response is not valid JSON object.");let x=p.json.data;if(typeof x>"u"&&(x=p.json.result),typeof x>"u")throw new H("internal","Response is missing data field.");return{data:X(x)}}const ge="@firebase/functions",be="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="auth-internal",Mt="app-check-internal",Bt="messaging-internal";function Vt(t,r){const a=(n,{instanceIdentifier:s})=>{const o=n.getProvider("app").getImmediate(),l=n.getProvider(Ot),c=n.getProvider(Bt),u=n.getProvider(Mt);return new Tt(o,l,c,u,s,t)};$e(new Nt(le,a,"PUBLIC").setMultipleInstances(!0)),me(ge,be,r),me(ge,be,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(t=We(),r=ae){const n=qe(ie(t),le).getImmediate({identifier:r}),s=bt("functions");return s&&Ut(n,...s),n}function Ut(t,r,a){It(ie(t),r,a)}function wr(t,r,a){return Dt(ie(t),r)}Vt(fetch.bind(self));const zt={apiKey:"AIzaSyCeBLEh6xtwDtnMWrj8N3As7tcJ_ZX8Yis",authDomain:"tukumi-7d3b8.firebaseapp.com",projectId:"tukumi-7d3b8",storageBucket:"tukumi-7d3b8.firebasestorage.app",messagingSenderId:"1040756277051",appId:"1:1040756277051:web:8d4604e5bbe7f35edc411e",measurementId:"G-WY8V9GB1RW"},ee=Ge(zt),L=He(ee),R=Je(ee,{localCache:Ke({tabManager:Qe()})}),jr=Ye(ee),Nr=Ft(ee);Xe(L,Ze).catch(console.error);const $t=()=>{const t=ne(),r=ve(),a=f=>r.pathname===f||f!=="/"&&r.pathname.startsWith(f+"/"),[n,s]=i.useState({displayName:"",handle:"",photoURL:null}),[o,l]=i.useState(!1),[c,u]=i.useState(0),[p,m]=i.useState(!1);i.useEffect(()=>{const f=K(L,g=>{if(g){const b={displayName:g.displayName||"Aristocrat",handle:g.email?g.email.split("@")[0]:"user-handle",photoURL:g.photoURL};s(b),m(!1);const y=z(V(R,"users",g.uid),j=>{if(j.exists()){const v=j.data();s(C=>({...C,...v,photoURL:v.photoURL||C.photoURL})),l(v.isAdmin||!1)}});return()=>y()}else s({displayName:"",handle:"",photoURL:null}),l(!1),u(0)});return()=>f()},[]),i.useEffect(()=>{const f=L.currentUser;if(!f)return;const g=Q($(R,"conversations"),J("participants","array-contains",f.uid)),b=z(g,y=>{let j=0;y.docs.forEach(v=>{const C=v.data();C.unreadCounts&&C.unreadCounts[f.uid]&&(j+=C.unreadCounts[f.uid])}),u(j)},y=>{console.log("Sidebar chat listener:",y.code)});return()=>b()},[n.handle]);const x=async()=>{try{await oe(L),t("/auth")}catch(f){console.error("Error signing out",f)}},h=({to:f,icon:g,label:b,badge:y})=>e.jsxs("div",{onClick:()=>t(f),className:`group flex items-center p-3 my-2 rounded-2xl cursor-pointer transition-all duration-200 font-medium
            ${a(f)&&f!=="/"||a(f)&&f==="/"&&r.pathname==="/"?"bg-primary text-white shadow-lg shadow-primary/30 translate-x-2":"text-gray-600 hover:bg-white hover:text-primary hover:translate-x-1"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center mr-3 transition-all
                ${a(f)?"bg-white/20":"bg-white shadow-sm group-hover:shadow-md"}`,children:e.jsx("i",{className:`fas ${g} text-lg`})}),e.jsx("span",{className:"tracking-wide",children:b}),y>0&&e.jsx("span",{className:"ml-auto bg-red-500 text-white text-[10px] font-bold px-2 py-1 rounded-full shadow-sm",children:y>99?"99+":y})]});return e.jsx("div",{className:"hidden md:flex flex-col w-[280px] h-[calc(100vh-40px)] fixed top-5 left-5 z-50",children:e.jsxs("div",{className:"glass-panel flex-1 rounded-[30px] p-6 flex flex-col overflow-y-auto no-scrollbar",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-10 pl-2 cursor-pointer",onClick:()=>t("/"),children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-tr from-primary to-gold rounded-xl flex items-center justify-center shadow-lg shadow-primary/20 relative",children:e.jsx("i",{className:"fas fa-cube text-white text-lg transform -rotate-12"})}),e.jsx("h1",{className:"text-2xl font-black tracking-tighter text-dark",children:"TUKUMI"})]}),e.jsxs("div",{onClick:()=>t("/profile"),className:"mb-8 p-3 bg-white/60 rounded-2xl border border-white flex items-center gap-3 cursor-pointer hover:shadow-md transition-all group",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex-shrink-0 overflow-hidden bg-gray-200 border border-white shadow-sm group-hover:scale-105 transition-transform flex items-center justify-center",children:n.photoURL&&!p?e.jsx("img",{src:n.photoURL,onError:()=>m(!0),className:"w-full h-full object-cover",alt:"Profile"}):e.jsx("i",{className:"fas fa-user text-gray-400 text-lg"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h4",{className:"font-bold text-sm text-dark truncate",children:n.displayName||"User"}),e.jsx("p",{className:"text-[10px] text-primary font-bold uppercase tracking-wider",children:"View Profile"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-[0.2em] text-gray-400 font-bold mb-3 pl-4",children:"Menu"}),e.jsx(h,{to:"/",icon:"fa-home",label:"Feed"}),e.jsx(h,{to:"/explore",icon:"fa-compass",label:"Explore"}),e.jsx(h,{to:"/circles",icon:"fa-dot-circle",label:"Circles"}),e.jsx(h,{to:"/dating",icon:"fa-heart",label:"Dating"}),e.jsx(h,{to:"/watch",icon:"fa-play",label:"Watch"}),e.jsx(h,{to:"/marketplace",icon:"fa-store",label:"Market"}),e.jsx(h,{to:"/messages",icon:"fa-comment-dots",label:"Shinobi",badge:c}),o&&e.jsx(h,{to:"/admin",icon:"fa-shield-alt",label:"Admin Panel"}),e.jsx(h,{to:"/boost",icon:"fa-rocket",label:"Boost"})]}),e.jsx("div",{className:"mt-auto pt-6 space-y-3",children:e.jsxs("button",{onClick:x,className:"w-full flex items-center justify-center gap-2 p-3 rounded-xl text-gray-500 hover:bg-red-50 hover:text-red-500 transition-all font-bold text-sm",children:[e.jsx("i",{className:"fas fa-sign-out-alt"})," Sign Out"]})})]})})},Wt=()=>{const t=ne(),r=ve(),a=b=>r.pathname===b,[n,s]=i.useState(!0),[o,l]=i.useState(0),c=i.useRef(null),u=i.useRef(!1),p=i.useRef(0),m=()=>{u.current=!1,c.current=setTimeout(()=>{u.current=!0,h()},3e3)},x=()=>{clearTimeout(c.current)},h=async()=>{if(navigator.vibrate&&navigator.vibrate(200),window.confirm("Do you want to sign out?"))try{await oe(L)}catch(b){console.error(b)}},f=b=>{if(u.current)return;const y=new Date().getTime(),j=y-p.current;j<300&&j>0?(window.scrollTo({top:0,behavior:"smooth"}),navigator.vibrate&&navigator.vibrate(50)):r.pathname!=="/"&&t("/"),p.current=y};i.useEffect(()=>{const b=K(L,y=>{if(y){const j=Q($(R,"conversations"),J("participants","array-contains",y.uid)),v=z(j,C=>{let d=0;C.docs.forEach(E=>{const N=E.data();N.unreadCounts&&N.unreadCounts[y.uid]&&(d+=N.unreadCounts[y.uid])}),l(d)},C=>{console.error("MobileNav error:",C)});return()=>v()}});return()=>b()},[]),i.useEffect(()=>{const b=v=>{(["input","textarea"].includes(v.target.tagName.toLowerCase())||v.target.isContentEditable)&&s(!1)},y=()=>{setTimeout(()=>{["input","textarea"].includes(document.activeElement.tagName.toLowerCase())||s(!0)},200)},j=v=>s(v.detail.visible);return document.addEventListener("focusin",b),document.addEventListener("focusout",y),window.addEventListener("toggle-nav",j),s(!0),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",y),window.removeEventListener("toggle-nav",j)}},[r.pathname]);const g=({to:b,icon:y,activeColor:j="text-primary",badgeCount:v=0})=>e.jsxs("button",{onClick:()=>t(b),className:`relative flex flex-col items-center justify-center w-full h-full transition-all duration-200 ${a(b)?`${j} -translate-y-1`:"text-gray-400 hover:text-gray-600"}`,children:[e.jsx("span",{className:`text-xl mb-1 ${a(b)?"drop-shadow-sm scale-110":""}`,children:e.jsx("i",{className:`fas ${y}`})}),a(b)&&e.jsx("span",{className:`absolute bottom-2 w-1 h-1 rounded-full ${a(b)&&b==="/dating"?"bg-pink-500":"bg-primary"}`}),v>0&&e.jsx("span",{className:"absolute top-2 right-3 bg-red-500 text-white text-[9px] font-bold min-w-[16px] h-[16px] flex items-center justify-center rounded-full border-2 border-white animate-bounce-in",children:v>9?"9+":v})]});return e.jsx("div",{className:`md:hidden fixed bottom-0 left-0 right-0 z-[90] transition-transform duration-300 ease-in-out ${n?"translate-y-0":"translate-y-full"}`,children:e.jsxs("div",{className:"h-[65px] bg-white/95 backdrop-blur-xl border-t border-gray-200 flex justify-between items-center shadow-[0_-5px_20px_rgba(0,0,0,0.05)] px-1 pb-safe",children:[e.jsx(g,{to:"/dating",icon:"fa-heart",activeColor:"text-pink-500"}),e.jsx(g,{to:"/circles",icon:"fa-dot-circle"}),e.jsx(g,{to:"/messages",icon:"fa-comment-dots",badgeCount:o}),e.jsx("div",{className:"relative -top-6 mx-1",children:e.jsx("button",{onMouseDown:m,onMouseUp:x,onTouchStart:m,onTouchEnd:x,onClick:f,className:"w-14 h-14 bg-gradient-to-tr from-primary to-gold rounded-2xl flex items-center justify-center text-white shadow-lg shadow-primary/40 border-4 border-white transform active:scale-95 transition-transform select-none",children:e.jsx("i",{className:"fas fa-cube text-2xl"})})}),e.jsx(g,{to:"/watch",icon:"fa-play"}),e.jsx(g,{to:"/marketplace",icon:"fa-store"}),e.jsx(g,{to:"/profile",icon:"fa-user"})]})})},_e=i.createContext(),Se=()=>{const t=i.useContext(_e);if(!t)throw new Error("useCall must be used within a CallProvider");return t},qt=({children:t})=>{const[r,a]=i.useState(null),[n,s]=i.useState(null),[o,l]=i.useState(null),[c,u]=i.useState(!1),[p,m]=i.useState(null),x=i.useRef(null),h=i.useRef(null);i.useEffect(()=>{h.current=new Audio("https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"),h.current.loop=!0;const d=K(L,E=>{a(E)});return()=>{d(),g()}},[]);const f=async()=>{try{h.current&&(h.current.currentTime=0,await h.current.play())}catch(d){console.warn("Autoplay prevented:",d)}},g=()=>{h.current&&(h.current.pause(),h.current.currentTime=0)},b=async(d,E,N="system")=>{if(d)try{await te($(R,`conversations/${d}/messages`),{text:E,senderId:(r==null?void 0:r.uid)||"system",senderName:"System",type:N,timestamp:G(),status:"sent"}),await F(V(R,"conversations",d),{lastMessage:E,updatedAt:G()})}catch(I){console.error("Log error:",I)}};i.useEffect(()=>{if(!r)return;const d=Q($(R,"calls"),J("receiverId","==",r.uid),J("status","==","ringing"),Ne("timestamp","desc"),je(1)),E=z(d,N=>{var I;if(N.empty)o&&(l(null),g());else{const w={id:N.docs[0].id,...N.docs[0].data()},_=(I=w.timestamp)==null?void 0:I.toDate().getTime(),A=Date.now();if(_&&A-_>3e4){F(V(R,"calls",w.id),{status:"missed"});return}!n&&!o&&(l(w),f())}},N=>console.error("Call Listener Error:",N));return()=>{E(),g()}},[r,n]);const y=async(d,E,N,I="video",w)=>{if(r)try{const _=w||null,A=await te($(R,"calls"),{callerId:r.uid,callerName:r.displayName||"Unknown",callerAvatar:r.photoURL||null,receiverId:d,receiverName:E,receiverAvatar:N,conversationId:_,type:I,status:"ringing",timestamp:G(),offer:null,answer:null});x.current=Date.now(),s({id:A.id,isCaller:!0,otherUser:{name:E,avatar:N},type:I,conversationId:_})}catch(_){console.error("Error starting call:",_),alert("Could not connect call. Check internet connection.")}},j=()=>{o&&(g(),x.current=Date.now(),s({id:o.id,isCaller:!1,otherUser:{name:o.callerName,avatar:o.callerAvatar},type:o.type,conversationId:o.conversationId}),l(null))},v=async()=>{if(o){g();try{await F(V(R,"calls",o.id),{status:"rejected"}),o.conversationId&&await b(o.conversationId,"ðŸš« Call declined (Busy)")}catch(d){console.error(d)}l(null)}},C=async()=>{if(!n)return;let d="";if(x.current){const N=Math.floor((Date.now()-x.current)/1e3),I=Math.floor(N/60),w=N%60;d=` (${I}:${w.toString().padStart(2,"0")})`}const E=`ðŸ“ž Call ended${d}`;try{await F(V(R,"calls",n.id),{status:"ended"}),n.conversationId&&await b(n.conversationId,E)}catch{}s(null),u(!1),x.current=null};return e.jsx(_e.Provider,{value:{user:r,activeCall:n,setActiveCall:s,incomingCall:o,startCall:y,answerCall:j,declineCall:v,endActiveCall:C,isMinimized:c,setIsMinimized:u,viewingChatId:p,setViewingChatId:m},children:t})},Gt=()=>{const t=ne(),{incomingCall:r,answerCall:a,declineCall:n,viewingChatId:s}=Se(),[o,l]=i.useState(null),[c,u]=i.useState(null),p=i.useRef(null),m=i.useRef(null),x=i.useRef(new Set);i.useEffect(()=>(p.current=new Audio("https://assets.mixkit.co/active_storage/sfx/2346/2346-preview.mp3"),m.current=new Audio("https://assets.mixkit.co/active_storage/sfx/1359/1359-preview.mp3"),m.current&&(m.current.loop=!0,m.current.volume=.8),K(L,f=>{if(l(f),f){const g=Q($(R,"conversations"),J("participants","array-contains",f.uid),Ne("updatedAt","desc"),je(5)),b=z(g,y=>{y.docChanges().forEach(j=>{var v,C,d;if(j.type==="modified"||j.type==="added"){const E=j.doc.data(),N=((v=E.updatedAt)==null?void 0:v.seconds)>Date.now()/1e3-5,I=E.lastSenderId||E.lastMessageSenderId,w=I&&I!==f.uid,_=j.doc.id+"_"+((C=E.updatedAt)==null?void 0:C.seconds),A=x.current.has(_),Y=s===j.doc.id;if(N&&w&&!A&&!Y){x.current.add(_);const M=(d=E.users)==null?void 0:d.find(T=>T.uid!==f.uid);u({id:j.doc.id,senderName:(M==null?void 0:M.displayName)||"Someone",senderAvatar:M==null?void 0:M.photoURL,text:E.lastMessage}),p.current&&(p.current.currentTime=0,p.current.play().catch(()=>{})),setTimeout(()=>u(null),4e3)}}})});return()=>b()}}),()=>{m.current&&(m.current.pause(),m.current.currentTime=0)}),[s]),i.useEffect(()=>{r?m.current&&m.current.paused&&(m.current.currentTime=0,m.current.play().catch(()=>{})):m.current&&(m.current.pause(),m.current.currentTime=0)},[r]);const h=()=>{r&&(a(r),t("/messages"))};return e.jsxs("div",{className:"fixed z-[9999] pointer-events-none inset-0 flex flex-col items-center pt-4 px-4",children:[r&&e.jsxs("div",{className:"pointer-events-auto bg-gray-900/95 backdrop-blur-md text-white p-4 rounded-2xl shadow-2xl w-full max-w-sm flex items-center gap-4 animate-slide-down border border-white/10",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.callerAvatar||"https://via.placeholder.com/50",className:"w-14 h-14 rounded-full border-2 border-green-500 animate-pulse object-cover"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 bg-green-500 rounded-full p-1",children:e.jsx("i",{className:"fas fa-phone text-xs"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-bold text-lg truncate",children:r.callerName}),e.jsxs("p",{className:"text-xs text-gray-300 flex items-center gap-1",children:[r.type==="video"?"Video Call":"Audio Call","..."]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:n,className:"w-10 h-10 rounded-full bg-red-500 hover:bg-red-600 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-times"})}),e.jsx("button",{onClick:h,className:"w-10 h-10 rounded-full bg-green-500 hover:bg-green-600 flex items-center justify-center animate-bounce",children:e.jsx("i",{className:"fas fa-phone"})})]})]}),c&&!r&&e.jsxs("div",{onClick:()=>{t("/messages",{state:{activeConversationId:c.id}}),u(null)},className:"pointer-events-auto mt-4 bg-white/90 backdrop-blur-xl p-3 rounded-2xl shadow-lg border border-gray-100 flex items-center gap-3 w-full max-w-sm cursor-pointer hover:scale-105 transition-all animate-fade-in-up",children:[e.jsx("img",{src:c.senderAvatar||"https://via.placeholder.com/40",className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h5",{className:"font-black text-dark text-sm",children:c.senderName}),e.jsx("p",{className:"text-gray-600 text-xs truncate",children:c.text})]}),e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]})},Ht=()=>{i.useEffect(()=>{console.log("Auth Page Mounted. Auth instance:",L?"Present":"Missing")},[]);const[t,r]=i.useState(!1),[a,n]=i.useState(!1),[s,o]=i.useState(!1),[l,c]=i.useState(null),[u,p]=i.useState(null),[m,x]=i.useState(""),[h,f]=i.useState(""),[g,b]=i.useState(""),[y,j]=i.useState(""),[v,C]=i.useState(""),[d,E]=i.useState(""),N=async w=>{if(w.preventDefault(),!m)return c("Please enter your email address.");o(!0),c(null),p(null);try{await et(L,m),console.log("Reset attempt processed for:",m),p("If this email is registered, we have sent a reset link. Check your Inbox and Spam."),setTimeout(()=>n(!1),5e3)}catch(_){console.error("Reset email failed:",_),c(_.message)}finally{o(!1)}},I=async w=>{w.preventDefault(),c(null),o(!0);try{if(t){if(!g||!y||!v||!d)throw new Error("Please fill in all fields to continue.");const A=(await tt(L,m,h)).user;await rt(A,{displayName:g}),await Ee(A),alert("Account created! Please check your email for verification."),await st(V(R,"users",A.uid),{uid:A.uid,displayName:g,email:A.email,handle:g.toLowerCase().replace(/\s+/g,"_")+Math.floor(Math.random()*1e3),birthday:y,gender:v,profession:d,isDatingActive:!1,photoURL:null,coverPhotoURL:"https://images.unsplash.com/photo-1579546929518-9e396f3cc809",bio:`I am a ${d}. New to Tukumi.`,joinedAt:G(),followers:0,following:0})}else await at(L,m,h)}catch(_){console.error("Auth Error:",_);let A=_.message;_.code==="auth/invalid-credential"&&(A="Invalid email or password."),_.code==="auth/user-not-found"&&(A="No account found with this email."),_.code==="auth/wrong-password"&&(A="Incorrect password."),c(A),o(!1)}};return e.jsxs("div",{className:"min-h-screen w-full flex items-center justify-center p-4 relative overflow-hidden bg-[#f0f4f8]",children:[e.jsx("div",{className:"absolute top-0 left-0 w-[500px] h-[500px] bg-primary/20 rounded-full blur-[120px] -translate-x-1/2 -translate-y-1/2 animate-pulse"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[500px] h-[500px] bg-gold/20 rounded-full blur-[120px] translate-x-1/2 -translate-y-1/2 animate-pulse",style:{animationDelay:"1s"}}),e.jsxs("div",{className:"glass-panel w-full max-w-5xl min-h-[600px] rounded-[40px] flex overflow-hidden shadow-2xl relative z-10",children:[e.jsxs("div",{className:"hidden md:flex flex-1 bg-gradient-to-br from-primary to-primary-dark text-white flex-col justify-center p-12 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-20 h-20 mb-8 relative perspective-container group",children:e.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-md rounded-xl border border-white/40 shadow-2xl flex items-center justify-center transform rotate-12 transition-transform duration-700 group-hover:rotate-[360deg]",children:e.jsx("div",{className:"w-10 h-10 bg-gold/80 rounded-lg shadow-inner"})})}),e.jsx("h1",{className:"text-5xl font-black tracking-tight mb-4 drop-shadow-sm",children:"TUKUMI"}),e.jsxs("p",{className:"text-lg text-white/90 font-medium leading-relaxed",children:["The aristocratic social network. ",e.jsx("br",{}),"Connect, Trade, and Date in a premium environment."]})]})]}),e.jsx("div",{className:"flex-1 bg-white/80 backdrop-blur-xl p-8 md:p-12 flex flex-col justify-center relative overflow-y-auto",children:e.jsx("div",{className:"max-w-md mx-auto w-full",children:a?e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-dark mb-4 flex items-center gap-2 font-bold text-sm",children:[e.jsx("i",{className:"fas fa-arrow-left"})," Back to Login"]}),e.jsx("h2",{className:"text-3xl font-black text-dark mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-gray-500 font-medium mb-8",children:"Enter your email and we'll send you a link to get back into your account."}),e.jsxs("form",{onSubmit:N,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider ml-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-envelope absolute left-4 top-3.5 text-gray-400"}),e.jsx("input",{type:"email",placeholder:"you@example.com",required:!0,className:"w-full bg-white border border-gray-200 rounded-xl pl-10 pr-4 py-3 outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all font-bold text-dark",value:m,onChange:w=>x(w.target.value)})]})]}),l&&e.jsx("div",{className:"text-red-500 text-sm font-bold bg-red-50 p-3 rounded-xl",children:l}),u&&e.jsx("div",{className:"text-green-600 text-sm font-bold bg-green-50 p-3 rounded-xl",children:u}),e.jsx("button",{type:"submit",disabled:s,className:"w-full bg-dark text-white font-bold py-4 rounded-xl hover:bg-primary transition-all shadow-lg disabled:opacity-70",children:s?"Sending...":"Send Reset Link"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-3xl font-black text-dark mb-2",children:t?"Join the Elite":"Welcome Back"}),e.jsx("p",{className:"text-gray-500 font-medium mb-8",children:t?"Create your identity to get started.":"Enter your credentials to access your account."}),e.jsxs("form",{className:"space-y-5",onSubmit:I,children:[t&&e.jsxs("div",{className:"animate-fade-in space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider ml-1",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-user absolute left-4 top-3.5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Your Name",required:t,className:"w-full bg-white border border-gray-200 rounded-xl pl-10 pr-4 py-3 outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all font-bold text-dark placeholder-gray-300",value:g,onChange:w=>b(w.target.value)})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider ml-1",children:"Profession"}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-briefcase absolute left-4 top-3.5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"e.g. Software Engineer",required:t,className:"w-full bg-white border border-gray-200 rounded-xl pl-10 pr-4 py-3 outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all font-bold text-dark placeholder-gray-300",value:d,onChange:w=>E(w.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider ml-1",children:"Birthday"}),e.jsx("input",{type:"date",required:t,className:"w-full bg-white border border-gray-200 rounded-xl px-4 py-3 outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all text-sm font-bold text-dark",value:y,onChange:w=>j(w.target.value)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider ml-1",children:"Gender"}),e.jsxs("select",{required:t,className:"w-full bg-white border border-gray-200 rounded-xl px-4 py-3 outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all text-sm font-bold text-dark appearance-none cursor-pointer",value:v,onChange:w=>C(w.target.value),children:[e.jsx("option",{value:"",disabled:!0,children:"Select..."}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Non-binary",children:"Non-binary"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider ml-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-envelope absolute left-4 top-3.5 text-gray-400"}),e.jsx("input",{type:"email",placeholder:"you@example.com",required:!0,className:"w-full bg-white border border-gray-200 rounded-xl pl-10 pr-4 py-3 outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all font-bold text-dark placeholder-gray-300",value:m,onChange:w=>x(w.target.value)})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider ml-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("i",{className:"fas fa-lock absolute left-4 top-3.5 text-gray-400"}),e.jsx("input",{type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0,className:"w-full bg-white border border-gray-200 rounded-xl pl-10 pr-4 py-3 outline-none focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all font-bold text-dark placeholder-gray-300",value:h,onChange:w=>f(w.target.value)})]})]}),!t&&e.jsx("div",{className:"text-right",children:e.jsx("button",{type:"button",onClick:()=>n(!0),className:"text-xs font-bold text-primary hover:underline",children:"Forgot Password?"})}),l&&e.jsxs("div",{className:"flex items-center gap-3 text-red-500 text-sm font-bold bg-red-50 p-4 rounded-xl border border-red-100 animate-shake",children:[e.jsx("i",{className:"fas fa-exclamation-circle text-lg"}),l]}),e.jsx("button",{type:"submit",disabled:s,className:"w-full bg-dark text-white font-bold py-4 rounded-xl hover:bg-primary transition-all shadow-lg shadow-dark/20 transform active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2 mt-6",children:s?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-circle-notch fa-spin"})," Processing..."]}):t?"Create Account":"Sign In"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-gray-500 text-sm font-medium",children:[t?"Already a member?":"Don't have an account?",e.jsx("button",{onClick:()=>{r(!t),c(null)},className:"ml-2 text-primary font-black hover:underline transition-all",children:t?"Sign In":"Sign Up"})]})})]})})})]})]})},Jt=({user:t})=>{const[r,a]=i.useState(!1),[n,s]=i.useState(""),o=async()=>{a(!0);try{await t.reload(),t.emailVerified?window.location.reload():s("Not verified yet. Please check your email (and spam folder).")}catch(u){console.error(u),s("Error checking status. Please try again.")}finally{a(!1)}},l=async()=>{a(!0);try{await Ee(t),s("Verification email resent! Check your inbox.")}catch(u){console.error(u),s("Error resending email. Try again later.")}finally{a(!1)}},c=()=>{oe(L).then(()=>window.location.reload())};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#f0f4f8] p-4",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-[30px] shadow-2xl p-8 text-center animate-fade-in",children:[e.jsx("div",{className:"w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6 text-4xl",children:"ðŸ“§"}),e.jsx("h1",{className:"text-2xl font-black text-dark mb-2",children:"Verify your Email"}),e.jsxs("p",{className:"text-gray-500 mb-6",children:["We sent a verification link to ",e.jsx("br",{}),e.jsx("span",{className:"font-bold text-primary",children:t.email})]}),n&&e.jsx("div",{className:"mb-6 p-3 bg-blue-50 text-blue-600 text-sm font-bold rounded-xl border border-blue-100",children:n}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:o,disabled:r,className:"w-full bg-primary text-white font-bold py-3.5 rounded-xl hover:bg-primary-dark transition-all shadow-lg shadow-primary/20",children:r?"Checking...":"I have Verified"}),e.jsx("button",{onClick:l,disabled:r,className:"w-full bg-white border-2 border-gray-100 text-gray-600 font-bold py-3.5 rounded-xl hover:bg-gray-50 transition-all",children:"Resend Email"}),e.jsx("button",{onClick:c,className:"text-sm text-gray-400 font-bold hover:text-red-500 transition-colors mt-4",children:"Sign Out / Use Different Email"})]})]})})},Kt={iceServers:[{urls:["stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302"]}],iceCandidatePoolSize:10},Yt=()=>{var Y,M;const{activeCall:t,endActiveCall:r,isMinimized:a,setIsMinimized:n}=Se(),[s,o]=i.useState(null),[l,c]=i.useState(null),[u,p]=i.useState(!1),[m,x]=i.useState(!0),[h,f]=i.useState(!0),[g,b]=i.useState("Connecting..."),[y,j]=i.useState(null),v=i.useRef(null),C=i.useRef(null),d=i.useRef(null),E=i.useRef([]);i.useEffect(()=>{if(!t)return;let T=null,P=null;const Ae=async()=>{try{d.current=new RTCPeerConnection(Kt),d.current.oniceconnectionstatechange=()=>{d.current.iceConnectionState==="connected"||d.current.iceConnectionState==="completed"?b("Connected"):d.current.iceConnectionState==="disconnected"?b("Reconnecting..."):d.current.iceConnectionState==="failed"&&(b("Connection Failed"),setTimeout(I,2e3))};const W=await navigator.mediaDevices.getUserMedia({video:t.type==="video",audio:!0});o(W),W.getTracks().forEach(D=>d.current.addTrack(D,W)),d.current.ontrack=D=>{D.streams&&D.streams[0]&&(c(D.streams[0]),b("Connected"))};const U=V(R,"calls",t.id),Te=$(U,"candidates");if(d.current.onicecandidate=D=>{D.candidate&&te(Te,{...D.candidate.toJSON(),senderId:t.isCaller?"caller":"callee"})},t.isCaller){const D=await d.current.createOffer();await d.current.setLocalDescription(D),await F(U,{offer:{type:D.type,sdp:D.sdp},status:"calling"}),T=z(U,async B=>{const O=B.data();if(!(!d.current||!O)){if(!d.current.currentRemoteDescription&&O.answer){const q=new RTCSessionDescription(O.answer);await d.current.setRemoteDescription(q),ce()}(O.status==="ended"||O.status==="rejected")&&N()}})}else T=z(U,async D=>{const B=D.data();if(!(!d.current||!B)){if(B.status==="ended"){N();return}if(!d.current.currentRemoteDescription&&B.offer){const O=new RTCSessionDescription(B.offer);await d.current.setRemoteDescription(O),ce();const q=await d.current.createAnswer();await d.current.setLocalDescription(q),await F(U,{answer:{type:q.type,sdp:q.sdp}})}}});P=z($(U,"candidates"),D=>{D.docChanges().forEach(B=>{if(B.type==="added"){const O=B.doc.data(),q=t.isCaller?"callee":"caller";if(O.senderId===q){const de=new RTCIceCandidate(O);d.current.remoteDescription?d.current.addIceCandidate(de).catch(Ie=>console.warn("Candidate Error",Ie)):E.current.push(de)}}})})}catch(W){console.error("WebRTC error:",W),j("Connection failed."),setTimeout(()=>N(),3e3)}},ce=()=>{d.current&&(E.current.forEach(W=>{d.current.addIceCandidate(W).catch(U=>console.warn("Queue Error",U))}),E.current=[])};return Ae(),()=>{T&&T(),P&&P(),N()}},[t]);const N=()=>{s&&s.getTracks().forEach(T=>T.stop()),d.current&&(d.current.close(),d.current=null),o(null),c(null),r()},I=async()=>{try{await F(V(R,"calls",t.id),{status:"ended"})}catch{}N()},w=()=>{if(s){const T=s.getAudioTracks();T.length>0?(T.forEach(P=>{P.enabled=!P.enabled}),p(!T[0].enabled)):console.warn("No audio tracks found to mute.")}},_=()=>{s&&(s.getVideoTracks().forEach(P=>P.enabled=!P.enabled),x(!m))},A=async()=>{const T=C.current;if(!T||typeof T.setSinkId!="function"){f(!h);return}try{const P=h?"":"default";await T.setSinkId(P),f(!h)}catch(P){console.error("Speaker toggle failed",P)}};return i.useEffect(()=>{v.current&&s&&(v.current.srcObject=s)},[s,a,m]),i.useEffect(()=>{C.current&&l&&(C.current.srcObject=l)},[l,a]),t?a?e.jsxs("div",{className:"fixed top-20 right-4 w-36 h-52 bg-gray-900 rounded-xl shadow-2xl z-[9999] overflow-hidden border border-white/20 cursor-move",children:[l?e.jsx("video",{ref:C,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-800 text-white text-xs",children:"Connecting..."}),e.jsx("button",{onClick:()=>n(!1),className:"absolute inset-0 z-10"})]}):e.jsxs("div",{className:"fixed inset-0 z-[9999] bg-[#1a1a1a] flex flex-col items-center justify-center",children:[y&&e.jsx("div",{className:"absolute top-4 bg-red-500 text-white px-6 py-2 rounded-full z-50",children:y}),e.jsx("div",{className:"absolute inset-0 w-full h-full",children:l?e.jsx("video",{ref:C,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gray-900",children:[e.jsx("img",{src:((Y=t.otherUser)==null?void 0:Y.avatar)||"https://via.placeholder.com/150",className:"w-32 h-32 rounded-full border-4 border-white/10 animate-pulse object-cover mb-4"}),e.jsx("h2",{className:"text-white text-2xl font-bold",children:(M=t.otherUser)==null?void 0:M.name}),e.jsx("p",{className:"text-gray-400 mt-2",children:g})]})}),t.type==="video"&&s&&e.jsx("div",{className:"absolute top-6 right-6 w-32 h-48 bg-black rounded-xl overflow-hidden shadow-lg border border-white/20 z-20",children:m?e.jsx("video",{ref:v,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover transform scale-x-[-1]"}):e.jsx("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center",children:e.jsx(ue,{className:"text-gray-500"})})}),e.jsxs("div",{className:"absolute bottom-10 flex items-center gap-6 p-4 px-8 bg-black/60 backdrop-blur-xl rounded-full border border-white/10 z-30",children:[e.jsx("button",{onClick:A,className:`p-4 rounded-full ${h?"bg-white text-black":"bg-gray-700 text-white"}`,children:h?e.jsx(De,{size:24}):e.jsx(Re,{size:24})}),e.jsx("button",{onClick:w,className:`p-4 rounded-full ${u?"bg-red-500 text-white":"bg-white text-black"}`,children:u?e.jsx(Le,{size:24}):e.jsx(Pe,{size:24})}),t.type==="video"&&e.jsx("button",{onClick:_,className:`p-4 rounded-full ${m?"bg-gray-700 text-white":"bg-white text-black"}`,children:m?e.jsx(Oe,{size:24}):e.jsx(ue,{size:24})}),e.jsx("button",{onClick:I,className:"p-5 rounded-full bg-red-600 text-white shadow-lg",children:e.jsx(Me,{size:32})}),e.jsx("button",{onClick:()=>n(!0),className:"p-4 rounded-full bg-gray-700 text-white",children:e.jsx(Be,{size:24})})]})]}):null},Xt=i.lazy(()=>k(()=>import("./Home-COGynuD-.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Qt=i.lazy(()=>k(()=>import("./Messages-ByDMKnkV.js"),__vite__mapDeps([7,1,2,3]))),ye=i.lazy(()=>k(()=>import("./Profile-CIlUIG4z.js"),__vite__mapDeps([8,1,2,4,3,5,6,9]))),Zt=i.lazy(()=>k(()=>import("./Circles-OMdst48w.js"),__vite__mapDeps([10,1,2,3,4]))),er=i.lazy(()=>k(()=>import("./CircleDetails-R7Ttvr2m.js"),__vite__mapDeps([11,1,2,3,4]))),tr=i.lazy(()=>k(()=>import("./Marketplace-W8Nchz1O.js"),__vite__mapDeps([12,1,2,3,4]))),rr=i.lazy(()=>k(()=>import("./ProductDetails-CaW4D_53.js"),__vite__mapDeps([13,1,2,3,4]))),sr=i.lazy(()=>k(()=>import("./BusinessHub-DCscST2u.js"),__vite__mapDeps([14,1,2,3,4]))),ar=i.lazy(()=>k(()=>import("./BusinessPage-spzIp3k7.js"),__vite__mapDeps([15,1,2,3,4,9,6]))),nr=i.lazy(()=>k(()=>import("./SavedItems-CM1ZSNIZ.js"),__vite__mapDeps([16,1,2,3,4]))),or=i.lazy(()=>k(()=>import("./Watch-Ms7kgI2Y.js"),__vite__mapDeps([17,1,2,3]))),ir=i.lazy(()=>k(()=>import("./Dating-BTFylqtN.js"),__vite__mapDeps([18,1,2,3,4]))),lr=i.lazy(()=>k(()=>import("./Notifications-DMDfVXbJ.js"),__vite__mapDeps([19,1,2,3,4]))),cr=i.lazy(()=>k(()=>import("./Connections-D2iFPGCo.js"),__vite__mapDeps([20,1,2,3,4]))),dr=i.lazy(()=>k(()=>import("./Explore-DpMc79II.js"),__vite__mapDeps([21,1,2,3,4]))),ur=i.lazy(()=>k(()=>import("./PostDetails--p1r5hdj.js"),__vite__mapDeps([22,1,2,3,4]))),mr=i.lazy(()=>k(()=>import("./BkashCallback-DwhmY1AI.js"),__vite__mapDeps([23,1,2,3]))),fr=i.lazy(()=>k(()=>import("./AdminDashboard-D3OkQRdP.js"),__vite__mapDeps([24,1,2,3,4]))),hr=i.lazy(()=>k(()=>import("./BoostHub-BGywxina.js"),__vite__mapDeps([25,1,2,3,4,6])));function pr(){const[t,r]=i.useState(null),[a,n]=i.useState(!0);return i.useEffect(()=>{let s,o=()=>{};return s=K(L,async l=>{if(r(l),n(!1),o(),l&&l.emailVerified){const c=V(R,"users",l.uid),u=()=>{F(c,{isOnline:!1,lastSeen:G()}).catch(p=>console.error(p))};await F(c,{isOnline:!0,lastSeen:G()}),window.addEventListener("beforeunload",u),o=()=>window.removeEventListener("beforeunload",u)}}),()=>{s&&s(),o()}},[]),a?e.jsx("div",{className:"min-h-screen bg-[#f0f4f8] flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center animate-pulse",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-tr from-[#008080] to-[#FFD166] rounded-2xl animate-spin shadow-2xl shadow-teal-900/20 mb-6 flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 bg-white/30 rounded-md"})}),e.jsx("p",{className:"text-[#008080] font-black text-sm tracking-[0.3em] uppercase",children:"INITIALIZING TUKUMI..."})]})}):t?t.emailVerified?e.jsx(Fe,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsxs(qt,{children:[e.jsx(Gt,{}),e.jsx(Yt,{}),e.jsxs("div",{className:"min-h-screen bg-[#f0f4f8] text-[#111827]",children:[e.jsx($t,{}),e.jsx(Wt,{}),e.jsx("div",{className:"w-full md:ml-[300px] md:w-[calc(100%-300px)] p-4 pb-28 transition-all duration-300",children:e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"p-10 text-center",children:"Loading..."}),children:e.jsxs(Ue,{children:[e.jsx(S,{path:"/",element:e.jsx(Xt,{})}),e.jsx(S,{path:"/explore",element:e.jsx(dr,{})}),e.jsx(S,{path:"/profile",element:e.jsx(ye,{})}),e.jsx(S,{path:"/profile/:id",element:e.jsx(ye,{})}),e.jsx(S,{path:"/profile/:id/connections",element:e.jsx(cr,{})}),e.jsx(S,{path:"/messages",element:e.jsx(Qt,{})}),e.jsx(S,{path:"/watch",element:e.jsx(or,{})}),e.jsx(S,{path:"/dating",element:e.jsx(ir,{})}),e.jsx(S,{path:"/notifications",element:e.jsx(lr,{})}),e.jsx(S,{path:"/marketplace",element:e.jsx(tr,{})}),e.jsx(S,{path:"/product/:id",element:e.jsx(rr,{})}),e.jsx(S,{path:"/business",element:e.jsx(sr,{})}),e.jsx(S,{path:"/business/:id",element:e.jsx(ar,{})}),e.jsx(S,{path:"/circles",element:e.jsx(Zt,{})}),e.jsx(S,{path:"/circles/:circleId",element:e.jsx(er,{})}),e.jsx(S,{path:"/saved-items",element:e.jsx(nr,{})}),e.jsx(S,{path:"/post/:id",element:e.jsx(ur,{})}),e.jsx(S,{path:"/bkash/callback",element:e.jsx(mr,{})}),e.jsx(S,{path:"/admin",element:e.jsx(fr,{})}),e.jsx(S,{path:"/boost",element:e.jsx(hr,{})}),e.jsx(S,{path:"*",element:e.jsx(ze,{to:"/"})})]})})})]})]})}):e.jsx(Jt,{user:t}):e.jsx(Ht,{})}const ke=i.createContext(),xr=({children:t})=>{const[r,a]=i.useState(()=>localStorage.getItem("theme")||"light");i.useEffect(()=>{const s=window.document.documentElement;s.classList.remove("dark"),s.classList.remove("reading"),s.classList.remove("light"),r==="reading"?s.classList.add("reading"):s.classList.add("light"),localStorage.setItem("theme",r)},[r]),i.useEffect(()=>{const s="reading-mode-styles";let o=document.getElementById(s);r==="reading"?o||(o=document.createElement("style"),o.id=s,o.innerHTML=`
          /* --- READING MODE OVERRIDES (Applied when <html> has class 'reading') --- */
          .reading body {
            background-color: #F8F5E6 !important; /* Warm Paper Background */
            color: #4A3B2A !important;           /* Dark Coffee Text */
          }
          
          /* Override White Cards */
          .reading .bg-white, 
          .reading .md\\:bg-white,
          .reading .glass-panel {
            background-color: #FFFCF0 !important; /* Softer Cream for Cards */
            border-color: #E8E0C5 !important;
            color: #4A3B2A !important;
          }

          /* Soften Grays */
          .reading .text-gray-500,
          .reading .text-gray-600, 
          .reading .text-gray-400 {
            color: #8C7B65 !important; /* Warm Gray */
          }

          /* Dark Text becomes Soft Brown */
          .reading .text-dark {
            color: #2E2218 !important;
          }

          /* Input Fields */
          .reading input, 
          .reading textarea, 
          .reading .bg-gray-50,
          .reading .bg-gray-100 {
            background-color: #F0EAD6 !important; /* Eggshell */
            border-color: #DBCDAF !important;
            color: #4A3B2A !important;
          }
          
          /* Hover States */
          .reading .hover\\:bg-gray-50:hover {
            background-color: #EBE0C5 !important;
          }
        `,document.head.appendChild(o)):o&&o.remove()},[r]);const n=()=>{a(s=>s==="light"?"reading":"light")};return e.jsx(ke.Provider,{value:{theme:r,toggleTheme:n},children:t})},Er=()=>i.useContext(ke);class gr extends we.Component{constructor(r){super(r),this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,a){console.error("React Error Boundary Caught:",r,a)}render(){var r;return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50 text-red-900 p-10 text-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Something went wrong."}),e.jsx("p",{className:"mb-4",children:(r=this.state.error)==null?void 0:r.message}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-lg font-bold transition duration-150 hover:bg-red-700",children:"Reload App"})]})}):this.props.children}}re.createRoot(document.getElementById("root")).render(e.jsx(we.StrictMode,{children:e.jsx(gr,{children:e.jsx(xr,{children:e.jsx(pr,{})})})}));export{L as a,Er as b,R as d,Nr as f,wr as h,jr as s,Se as u};
