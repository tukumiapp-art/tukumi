import{j as e}from"./ui-BndUj6rU.js";import{r as n}from"./vendor-C_rG9DFw.js";import{a as P,s as g,d as S}from"./index-gjDmyrly.js";import{E as p,N as j,G as y,t as B,k as R,v as I}from"./firebase-BaLQ-sp5.js";import{P as L}from"./PaymentModal-DBoEzFiD.js";const _=({onClose:N,target:i})=>{const t=(i==null?void 0:i.type)==="business",[o,u]=n.useState(1),[b,m]=n.useState(!1),[v,h]=n.useState(!1),[w,k]=n.useState(null),[a,r]=n.useState({fullName:t?i.name:"",category:t?"Retail & E-commerce":"Content Creator",documentType:"National ID",businessType:"Sole Proprietorship",regNumber:"",taxId:"",website:"",docFront:null,docBack:null}),c=(s,l)=>{s.target.files[0]&&r({...a,[l]:s.target.files[0]})},F=async()=>{if(!a.docFront||!a.docBack)return alert("Please upload required documents.");if(!a.fullName)return alert(t?"Enter business name.":"Enter full name.");if(t&&!a.regNumber)return alert("Registration/Trade License No. is required.");m(!0);try{const s=P.currentUser,l=t?`business_verification/${i.id}`:`verification/${s.uid}`,x=p(g,`${l}/doc1_${Date.now()}`),f=p(g,`${l}/doc2_${Date.now()}`);await j(x,a.docFront),await j(f,a.docBack);const D=await y(x),T=await y(f),C=await B(R(S,"verification_requests"),{uid:s.uid,targetId:t?i.id:s.uid,targetType:t?"business_page":"user_profile",name:a.fullName,category:a.category,details:t?{businessType:a.businessType,regNumber:a.regNumber,taxId:a.taxId,website:a.website}:{docType:a.documentType},frontURL:D,backURL:T,status:"pending",paymentStatus:"unpaid",timestamp:I()});k(C.id),m(!1),h(!0)}catch(s){console.error("Submission Error:",s),alert("Failed to save request. Please try again."),m(!1)}},d=({label:s,file:l,onUpload:x})=>e.jsxs("div",{className:"relative group",children:[e.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:s}),e.jsxs("label",{className:`flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-2xl cursor-pointer transition-all overflow-hidden ${l?"border-primary bg-primary/5":"border-gray-200 hover:bg-gray-50 hover:border-gray-300"}`,children:[l?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:URL.createObjectURL(l),className:"w-full h-full object-cover",alt:"preview"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("span",{className:"text-white font-bold text-sm",children:[e.jsx("i",{className:"fas fa-pen mr-1"})," Change"]})})]}):e.jsxs("div",{className:"text-center p-4",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-full shadow-sm flex items-center justify-center mx-auto mb-2 text-gray-400",children:e.jsx("i",{className:"fas fa-camera"})}),e.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Click to Upload"})]}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:x})]})]});return e.jsxs("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[9999] p-4 animate-fade-in",children:[e.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[35px] shadow-2xl overflow-hidden flex flex-col max-h-[90vh] relative",children:[e.jsx("button",{onClick:N,className:"absolute top-4 right-4 z-20 w-8 h-8 bg-white/50 hover:bg-white rounded-full flex items-center justify-center text-gray-600 hover:text-dark transition-all shadow-sm backdrop-blur-md",children:e.jsx("i",{className:"fas fa-times"})}),e.jsxs("div",{className:"bg-gradient-to-br from-[#1DA1F2]/10 to-blue-50 p-8 text-center border-b border-blue-100/50 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[#1DA1F2] to-blue-400"}),e.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg text-3xl text-[#1DA1F2] animate-bounce-in",children:e.jsx("i",{className:t?"fas fa-briefcase":"fas fa-check-circle"})}),e.jsxs("h2",{className:"text-2xl font-black text-dark mb-1",children:["Verify ",t?"Business":"Profile"]}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Apply for the blue badge"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[o===1&&e.jsxs("div",{className:"space-y-6 animate-slide-in",children:[e.jsx("h3",{className:"font-bold text-lg text-dark",children:"Why Verify?"}),e.jsx("ul",{className:"space-y-4",children:[{icon:"fa-shield-alt",title:"Build Trust",desc:"Show customers you are a legitimate entity."},{icon:"fa-search",title:"Search Priority",desc:"Rank higher in marketplace and search."},{icon:"fa-check-circle",title:"Blue Badge",desc:"Get the exclusive checkmark on your profile."}].map((s,l)=>e.jsxs("li",{className:"flex items-start gap-4 p-3 rounded-2xl hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-full flex items-center justify-center text-[#1DA1F2] shrink-0",children:e.jsx("i",{className:`fas ${s.icon}`})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-dark text-sm",children:s.title}),e.jsx("p",{className:"text-xs text-gray-500",children:s.desc})]})]},l))})]}),o===2&&e.jsxs("div",{className:"space-y-5 animate-slide-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-lg text-dark",children:"Business Details"}),e.jsx("span",{className:"text-xs font-bold text-gray-400 bg-gray-100 px-2 py-1 rounded-lg",children:"Step 2/3"})]}),t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Legal Business Name"}),e.jsx("input",{className:"w-full bg-gray-50 p-3 rounded-xl border border-gray-200 outline-none focus:border-[#1DA1F2] font-medium text-sm",value:a.fullName,onChange:s=>r({...a,fullName:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Business Type"}),e.jsxs("select",{className:"w-full bg-gray-50 p-3 rounded-xl border border-gray-200 outline-none font-medium text-sm cursor-pointer",value:a.businessType,onChange:s=>r({...a,businessType:s.target.value}),children:[e.jsx("option",{children:"Sole Proprietorship"}),e.jsx("option",{children:"Partnership"}),e.jsx("option",{children:"Limited Company (Ltd)"}),e.jsx("option",{children:"Government Entity"})," ",e.jsx("option",{children:"Non-Profit / NGO"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Trade License No."}),e.jsx("input",{className:"w-full bg-gray-50 p-3 rounded-xl border border-gray-200 outline-none focus:border-[#1DA1F2] font-medium text-sm",placeholder:"Required",value:a.regNumber,onChange:s=>r({...a,regNumber:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:["Tax ID (TIN/BIN) ",e.jsx("span",{className:"text-gray-400 font-normal lowercase",children:"(optional)"})]}),e.jsx("input",{className:"w-full bg-gray-50 p-3 rounded-xl border border-gray-200 outline-none font-medium text-sm",placeholder:"e.g. 123-456-789",value:a.taxId,onChange:s=>r({...a,taxId:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[e.jsx(d,{label:"Trade License / Registration",file:a.docFront,onUpload:s=>c(s,"docFront")}),e.jsx(d,{label:"Tax Cert / Other Proof",file:a.docBack,onUpload:s=>c(s,"docBack")})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Full Legal Name"}),e.jsx("input",{className:"w-full bg-gray-50 p-3 rounded-xl border border-gray-200 outline-none focus:border-[#1DA1F2] font-medium text-sm",value:a.fullName,onChange:s=>r({...a,fullName:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Category"}),e.jsxs("select",{className:"w-full bg-gray-50 p-3 rounded-xl border border-gray-200 outline-none font-medium text-sm",value:a.category,onChange:s=>r({...a,category:s.target.value}),children:[e.jsx("option",{children:"Content Creator"}),e.jsx("option",{children:"Public Figure"}),e.jsx("option",{children:"Journalist"}),e.jsx("option",{children:"Government Official"}),e.jsx("option",{children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1.5 ml-1",children:"Document Type"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["National ID","Passport","Driving License"].map(s=>e.jsx("button",{onClick:()=>r({...a,documentType:s}),className:`py-2.5 rounded-xl text-xs font-bold border transition-all ${a.documentType===s?"bg-[#1DA1F2] text-white border-[#1DA1F2] shadow-md":"bg-white text-gray-500 border-gray-200 hover:bg-gray-50"}`,children:s},s))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[e.jsx(d,{label:"Front Side",file:a.docFront,onUpload:s=>c(s,"docFront")}),e.jsx(d,{label:"Back Side",file:a.docBack,onUpload:s=>c(s,"docBack")})]})]})]}),o===3&&e.jsxs("div",{className:"text-center space-y-8 animate-slide-in",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-2xl text-dark mb-2",children:"Review & Payment"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Final step to submit your application."})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-3xl border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"text-gray-500 font-bold text-sm",children:"Processing Fee"}),e.jsx("span",{className:"text-2xl font-black text-dark",children:"à§³ 1"})]}),e.jsx("div",{className:"h-px bg-gray-200 mb-4"}),e.jsxs("div",{className:"flex gap-3 text-left",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-[#1DA1F2] shrink-0",children:e.jsx("i",{className:"fas fa-clock"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-dark text-sm",children:"Estimated Time"}),e.jsx("p",{className:"text-xs text-gray-500",children:"3-4 Working Days"})]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-yellow-50 border border-yellow-100 rounded-2xl text-left",children:[e.jsx("i",{className:"fas fa-info-circle text-yellow-600 mt-0.5"}),e.jsxs("p",{className:"text-xs text-yellow-800 font-medium leading-relaxed",children:["This fee covers the manual review process. It is ",e.jsx("strong",{children:"non-refundable"})," even if the application is rejected."]})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-100 bg-white flex gap-3",children:[o>1&&e.jsx("button",{onClick:()=>u(s=>s-1),className:"px-6 py-3 rounded-xl font-bold text-gray-500 hover:bg-gray-100",children:"Back"}),o<3?e.jsx("button",{onClick:()=>u(s=>s+1),className:"flex-1 bg-dark text-white py-3 rounded-xl font-bold hover:bg-primary shadow-lg",children:"Next Step"}):e.jsx("button",{onClick:F,disabled:b,className:"flex-1 bg-[#1DA1F2] text-white py-3 rounded-xl font-bold hover:bg-[#0d8ddb] shadow-lg shadow-blue-200 flex items-center justify-center gap-2",children:b?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-circle-notch fa-spin"})," Processing..."]}):"Pay & Submit"})]})]}),v&&e.jsx(L,{amount:1,itemName:"Verification Review Fee",onClose:()=>h(!1),metadata:{type:"verification",requestId:w},onSuccess:()=>{alert("Payment Success!"),window.location.reload()}})]})};export{_ as V};
