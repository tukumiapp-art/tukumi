import{j as e}from"./ui-BndUj6rU.js";import{u as R,r as o}from"./vendor-C_rG9DFw.js";import{d as j,a as E,s as y}from"./index-D6biLhoi.js";import{o as D,q,w as A,k as w,h as B,E as N,N as k,G as C,v as I,t as M}from"./firebase-BaLQ-sp5.js";import{T}from"./TopBar-CRp8H5ed.js";const W=()=>{const x=R(),[t,g]=o.useState(null),[h,b]=o.useState([]),[f,p]=o.useState(!1),[S,n]=o.useState(!1),[c,F]=o.useState(null),[v,$]=o.useState(null),[a,i]=o.useState({name:"",category:"Retail & E-commerce",description:"",email:"",phone:"",website:"",address:""}),L=["Retail & E-commerce","Technology & Software","Professional Services","Food & Beverage","Health & Wellness","Education & Training","Real Estate & Construction","Arts & Entertainment","Automotive","Travel & Hospitality","Manufacturing & Industrial","Fashion & Lifestyle","Legal & Finance","Agriculture","Non-Profit"];o.useEffect(()=>{const s=D(E,l=>{if(l){g(l);const d=q(w(j,"business_pages"),A("teamIds","array-contains",l.uid)),u=B(d,m=>{b(m.docs.map(r=>({id:r.id,...r.data()})))});return()=>u()}else g(null),b([])});return()=>s()},[]);const P=async s=>{if(s.preventDefault(),!t)return alert("Sign in required.");if(!a.name||!c)return alert("Name and Logo are required.");p(!0);try{let l=null,d=null;if(c){const r=N(y,`business/${t.uid}/${Date.now()}_logo`);await k(r,c),l=await C(r)}if(v){const r=N(y,`business/${t.uid}/${Date.now()}_cover`);await k(r,v),d=await C(r)}const u={...a,ownerId:t.uid,teamIds:[t.uid],team:[{uid:t.uid,name:t.displayName,role:"Admin",avatar:t.photoURL}],logo:l,coverImage:d||"https://images.unsplash.com/photo-1497366216548-37526070297c",isVerified:!1,followers:0,rating:0,createdAt:I()},m=await M(w(j,"business_pages"),u);n(!1),x(`/business/${m.id}`)}catch(l){console.error(l),alert("Failed to create page.")}finally{p(!1)}};return e.jsxs("div",{className:"p-4 md:p-6 w-full max-w-[1400px] mx-auto",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(T,{})}),e.jsxs("div",{className:"bg-white rounded-[30px] shadow-sm min-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"h-60 bg-gradient-to-r from-dark to-gray-900 flex items-center justify-between p-10 text-white relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("h1",{className:"text-4xl font-black mb-2",children:"Business Hub"}),e.jsx("p",{className:"text-white/70",children:"Manage your empire."})]}),e.jsxs("button",{onClick:()=>n(!0),className:"relative z-10 bg-primary hover:bg-primary-light text-white px-6 py-3 rounded-xl font-bold shadow-lg flex items-center gap-2 transition-all",children:[e.jsx("i",{className:"fas fa-plus-circle"})," Create Page"]})]}),e.jsxs("div",{className:"p-8",children:[e.jsx("h3",{className:"text-xl font-bold text-dark mb-6",children:"Your Businesses"}),h.length===0?e.jsxs("div",{className:"text-center py-20 border-2 border-dashed border-gray-200 rounded-3xl",children:[e.jsx("i",{className:"fas fa-briefcase text-4xl text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"You haven't created any business pages yet."}),e.jsx("button",{onClick:()=>n(!0),className:"text-primary font-bold",children:"Create one now"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(s=>e.jsxs("div",{onClick:()=>x(`/business/${s.id}`),className:"bg-white border border-gray-100 rounded-[24px] overflow-hidden shadow-sm hover:shadow-xl transition-all group cursor-pointer",children:[e.jsxs("div",{className:"h-24 bg-gray-200 relative",children:[e.jsx("img",{src:s.coverImage,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute -bottom-8 left-6 w-16 h-16 rounded-xl bg-white p-1 shadow-md",children:e.jsx("img",{src:s.logo,className:"w-full h-full rounded-lg object-cover"})})]}),e.jsxs("div",{className:"pt-10 p-6",children:[e.jsxs("h3",{className:"font-bold text-dark text-lg mb-1 flex items-center gap-2",children:[s.name," ",s.isVerified&&e.jsx("i",{className:"fas fa-check-circle text-blue-500 text-xs"})]}),e.jsx("p",{className:"text-xs text-gray-500 font-bold uppercase mb-4",children:s.category}),e.jsx("button",{className:"w-full bg-gray-50 text-dark font-bold py-2 rounded-lg hover:bg-dark hover:text-white transition-colors text-sm",children:"Manage Page"})]})]},s.id))})]})]}),S&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[80] p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[30px] shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center bg-[#F8FAFD]",children:[e.jsx("h3",{className:"font-black text-xl text-dark",children:"Create Business Page"}),e.jsx("button",{onClick:()=>n(!1),children:e.jsx("i",{className:"fas fa-times text-gray-400 hover:text-dark"})})]}),e.jsxs("form",{onSubmit:P,className:"p-6 space-y-6 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Business Name"}),e.jsx("input",{required:!0,className:"w-full bg-gray-50 p-3 rounded-xl font-bold outline-none",value:a.name,onChange:s=>i({...a,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Category"}),e.jsx("select",{className:"w-full bg-gray-50 p-3 rounded-xl outline-none",value:a.category,onChange:s=>i({...a,category:s.target.value}),children:L.map(s=>e.jsx("option",{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Description"}),e.jsx("textarea",{required:!0,rows:"3",className:"w-full bg-gray-50 p-3 rounded-xl outline-none",value:a.description,onChange:s=>i({...a,description:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Email"}),e.jsx("input",{type:"email",className:"w-full bg-gray-50 p-3 rounded-xl outline-none",value:a.email,onChange:s=>i({...a,email:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Website"}),e.jsx("input",{type:"url",className:"w-full bg-gray-50 p-3 rounded-xl outline-none",value:a.website,onChange:s=>i({...a,website:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Logo"}),e.jsx("input",{type:"file",required:!0,accept:"image/*",onChange:s=>F(s.target.files[0])})]}),e.jsx("button",{type:"submit",disabled:f,className:"w-full bg-dark text-white font-bold py-4 rounded-xl hover:bg-primary transition-all",children:f?"Creating...":"Launch Page"})]})]})})]})};export{W as default};
